<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes">
<title>NOTO - (WIP)Rust 基礎文法 メモ</title>
<link rel="stylesheet" href="/public/css/base.css">



<meta property="og:url" content="posts/past/765-2018-06-18.html" />
<meta property="og:type" content="article" />
<meta property="og:title" content="NOTO - (WIP)Rust 基礎文法 メモ" />
<meta property="og:description" content="Rustのインストール公式サイトに記載の方法で実行。[embed]https://www.rust-lang.org/ja-JP/install.html[/embed]Rustのプロ..." />
<meta property="og:site_name" content="NOTO" />
<meta property="og:image" content="https://noto.katsumataryo.com/public/images/ogp.png" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="NOTO - (WIP)Rust 基礎文法 メモ">
<meta name="twitter:description" content="Rustのインストール公式サイトに記載の方法で実行。[embed]https://www.rust-lang.org/ja-JP/install.html[/embed]Rustのプロ...">
<meta name="twitter:image" content="https://noto.katsumataryo.com/public/images/ogp.png">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CVBDT5R2DS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-CVBDT5R2DS');
</script>
    </head>
    <body>
        <h1><a href="/">NOTO</a></h1>

        <div class="content">
            <h2 class="title">(WIP)Rust 基礎文法 メモ</h2>
            <div class="description">
                　Date：2018-06-18 01:00:09 +0900<br />
                　Categories： TECHNOLOGY <br />
            </div>
            <h4>Rustのインストール</h4>
<p>公式サイトに記載の方法で実行。</p>
<p>[embed]https://www.rust-lang.org/ja-JP/install.html[/embed]</p>
<h4>Rustのプログラム実行</h4>
<ul>
<li>コンパイル: $ rustc</li>
</ul>
<h4>REPL</h4>
<p><a href="https://github.com/murarth/rusti">https://github.com/murarth/rusti</a> で非公式だけどある様子。ただ2016-08-01以前のものを使用する必要がありそうで悩ましい。<a href="https://repl.it/site/languages/rust">repl.it</a> というサイトがあるみたい### 文法</p>
<h4>コメント</h4>
<p>一行コメント</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">// 一行コメント
</span></pre>
<p>複数行コメント</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">/*
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">複数行のコメントが
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">ここで書ける
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">*/
</span></pre>
<p>ドキュメンテーションコメントなるものもある様子。markdown記法が使える。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">/// 一行のドキュメンテーションコメント
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">//! それを含んでいる要素（例えばクレート、モジュール、関数）にコメントを付けます。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">//! 一般的にはクレートルート（lib.rs）やモジュールルート（mod.rs）の中で使われる
</span></pre>
<h4>変数</h4>
<p>変数の宣言。デフォルトはイミュータブル。実際に使用される時は値で初期化されている必要がある。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let x = 5; // イミュータブル
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let mut y = 6; // ミュータブル
</span></pre>
<h4>パターン</h4>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let (x, y) = (1, 2);
</span></pre>
<h4>型注釈</h4>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">//xは型i32を持つ束縛で、値は 5 である。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let x: i32 = 5;
</span></pre>
<h4>スコープとシャドーイング</h4>
<p>rubyとちょっと感覚が違うのは *1 で値が書き換わってないところ。変化はスコープの中で閉じている理解。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let x: i32 = 8;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">{
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;{}&quot;, x); // &quot;8&quot;を印字する
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let x = 12;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;{}&quot;, x); // &quot;12&quot;を印字する
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">}
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;{}&quot;, x); // &quot;8&quot;を印字する *1
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let x = 42;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;{}&quot;, x); // &quot;42&quot;を印字する
</span></pre>
<h4>変数</h4>
<p>Rustはすくなくとも一つの関数main関数がある</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">fn main() {
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">}
</span></pre>
<p>この中に処理を書いていく。引数を取る時は下記のように書く。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">// x というなの i32 という型の引数
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">fn foo(x: i32) {
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">}
</span></pre>
<p>戻り値の型の指定</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">fn foo(x: i32) -&gt; i32 {
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">}
</span></pre>
<h4>リターン</h4>
<p>関数の一番最後はreturnを書かない。早期リターンは以下のような感じ</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">fn foo(x: i32) -&gt; i32 {
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">return x;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">// このコードは走りません!
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">x + 1
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">}
</span></pre>
<h4>関数ポインタ</h4>
<p>関数の内容をへんすうにいれることが可能。</p>
<p>fn plus_one(i: i32) -&gt; i32 {<br />
 i + 1<br />
}</p>
<p>// without type inference<br />
let f: fn(i32) -&gt; i32 = plus_one;</p>
<p>// with type inference<br />
let f = plus_one;</p>
<h3>プリミティブ型</h3>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let x: bool = true; # 真偽値
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let x = &#39;x&#39; # 一文字
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let i = ４２ # 数値型 u =&gt; 符号なし / i =&gt; 符号あり / f =&gt; 小数点
</span></pre>
<h4>配列</h4>
<p>配列は <code>[T; N]</code> という型を持つ。ジェネリクス&lt;T&gt;がまだよくわかってない。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let array = [0; 20];
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let a = [1, 2, 3];
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;a has {} elements&quot;, a.len()); // 表示
</span></pre>
<p>添字記法でも値を取り出せる。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let names = [&quot;Graydon&quot;, &quot;Brian&quot;, &quot;Niko&quot;]; // names: [&amp;str; 3]
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;The second name is: {}&quot;, names[1]);
</span></pre>
<h4>スライス</h4>
<p>様々なものからスライスを作るためには <code>&amp;</code> と <code>[]</code> の組合せを使うことができます。 <code>&amp;</code> はスライスが参照と同じであることを示し、 <code>[]</code> はレンジを持ち、スライスの長さを定義します。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let a = [0, 1, 2, 3, 4];
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let complete = &amp;a[..]; // aに含まれる全ての要素を持つスライス
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let middle = &amp;a[1..4]; // 1、2、3のみを要素に持つaのスライス
</span></pre>
<h3>str</h3>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let string = &quot;文字列&quot;; // 文字列型
</span></pre>
<h4>タプル</h4>
<p>タプルは固定サイズの順序ありリスト。</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">let x = (1, &quot;hello&quot;);
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let x: (i32, &amp;str) = (1, &quot;hello&quot;); // 型注釈付き。様々な方が混在できる。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">// 値の取り出し
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let tuple = (1, 2, 3);
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let x = tuple.0;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let y = tuple.1;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">let z = tuple.2;
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">println!(&quot;x is {}&quot;, x);
</span></pre>

            <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false" data-text="(WIP)Rust 基礎文法 メモ - NOTO (@katsumata_ryo)">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
        <div class="footer">
            <h2 class="subtitle">Categories</h2>

| <a href="/categories/TECHNOLOGY.html">TECHNOLOGY</a> | <a href="/categories/SOUNDTRACK.html">SOUNDTRACK</a> | <a href="/categories/PHOTOGRAPHY.html">PHOTOGRAPHY</a> | <a href="/categories/HIBI.html">HIBI</a> | <a href="/categories/WORK.html">WORK</a> | <a href="/categories/BOOK.html">BOOK</a> | <a href="/categories/CULTURE.html">CULTURE</a> | <a href="/categories/ETC.html">ETC</a> | 

<h2 class="subtitle">Past Articles</h2>
| <a href="/yearly/2022.html">2022</a> | <a href="/yearly/2021.html">2021</a> | <a href="/yearly/2020.html">2020</a> | <a href="/yearly/2019.html">2019</a> | <a href="/yearly/2018.html">2018</a> | <a href="/yearly/2017.html">2017</a> | <a href="/yearly/2016.html">2016</a> | <a href="/yearly/2015.html">2015</a> | <a href="/yearly/2014.html">2014</a> | <a href="/yearly/2013.html">2013</a> | 

<p><a href="/">TOP</a></p>
        </div>
    </body>
</html>
