<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes">
<title>note - ドメインを失効したドメインでWPを運用していたら</title>
<link rel="stylesheet" href="/public/css/base.css">
    </head>
    <body>
        <h1><a href="/">note</a></h1>

        <div class="content">
            <h2 class="title">ドメインを失効したドメインでWPを運用していたら</h2>
            <div class="description">
                　Date：2016-04-10 03:01:36 +0900<br />
                　Categories： ETC <br />
                
            </div>
            <h4>はじめに</h4>
<p>ドメインを失効したドメインでWPを運用していたらログインもできず死にました。</p>
<p>やっと移行ができてログインできました。</p>
<h4>なぜ死んだのか</h4>
<ul>
<li>ドメインがすぐ取り返せない</li>
<li>お名前.comでドメインを失効すると、お名前.comにドメインを持って行かれて復旧がすぐできそうにない。</li>
<li>ログインできない</li>
<li>wordpressがドメインの文字列を持ってしまっている</li>
<li>違うドメインを上から付けてログイン画面をだせても、ログイン後に失効しているドメインに飛ばされる。</li>
<li>「ドメイン失効 wordpress ログイン」で検索した方法でなんかうまく行かなかった</li>
<li>sqlを書いてくれている記事があったが、わたしの環境だとログイン後403で弾かれた
というわけでちょっと辛い感じでした。</li>
</ul>
<h4>やったこと</h4>
<ul>
<li>wordpressのファイルデータをそっくり別ドメイン用にコピーした</li>
<li>データベースのダンプをゲットして、sqlの文字列で旧ドメインを新ドメインに一括置換した</li>
<li>そのデータベースをアップロードして、結びつけた</li>
<li>パーマリンクが壊れたので、記事をエクスポートして、データベースを消して作成しなおし、エクスポートデータをインポートした
※ データベースは荒業なので、正攻法で言ったほうが良いと思います</li>
</ul>
<h4>無事に見れるようになった</h4>
<p>以上で見れるようになりました。一安心。</p>
<p>まだ完全に大丈夫か確認をしていないのでそちらを確かめたいです。</p>
<p>一応メモ。</p>

            <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
        <div class="footer">
            <a href="/">TOP</a>
        </div>
    </body>
</html>
