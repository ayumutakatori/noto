<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, user-scalable=yes">
<title>EC2で0からwordpressを展開するまでのメモ</title>
<link rel="stylesheet" href="/public/css/base.css">
    </head>
    <body>
        <h1><a href="/">PAPYRUS</a></h1>

        <div class="content">
            <h2 class="title">EC2で0からwordpressを展開するまでのメモ</h2>
            <div class="description">
                　Date：2013-11-17 17:55:04 +0900<br />
                　Categories： TECHNOLOGY <br />
                
            </div>
            <p>EC2立ち上げ</p>
<p>yum install系</p>
<p>・httpd<br />
・php<br />
・mysqld</p>
<pre style="background-color:#2b303b;">
<span style="color:#c0c5ce;">$ sudo yum install httpd httpd-devel httpd-tools
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">Package アーキテクチャー
</span><span style="color:#c0c5ce;">バージョン リポジトリー 容量
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">インストール中:
</span><span style="color:#c0c5ce;">httpd x86_64 2.2.25-1.0.amzn1 amzn-main 1.2 M
</span><span style="color:#c0c5ce;">httpd-devel x86_64 2.2.25-1.0.amzn1 amzn-main 162 k
</span><span style="color:#c0c5ce;">httpd-tools x86_64 2.2.25-1.0.amzn1 amzn-main 80 k
</span><span style="color:#c0c5ce;">依存性関連でのインストールをします:
</span><span style="color:#c0c5ce;">apr x86_64 1.4.6-1.10.amzn1 amzn-main 110 k
</span><span style="color:#c0c5ce;">apr-devel x86_64 1.4.6-1.10.amzn1 amzn-main 196 k
</span><span style="color:#c0c5ce;">apr-util x86_64 1.4.1-4.14.amzn1 amzn-main 87 k
</span><span style="color:#c0c5ce;">apr-util-devel x86_64 1.4.1-4.14.amzn1 amzn-main 78 k
</span><span style="color:#c0c5ce;">apr-util-ldap x86_64 1.4.1-4.14.amzn1 amzn-main 17 k
</span><span style="color:#c0c5ce;">cyrus-sasl-devel x86_64 2.1.23-13.10.amzn1 amzn-main 356 k
</span><span style="color:#c0c5ce;">db4-cxx x86_64 4.7.25-17.10.amzn1 amzn-main 688 k
</span><span style="color:#c0c5ce;">db4-devel x86_64 4.7.25-17.10.amzn1 amzn-main 7.0 M
</span><span style="color:#c0c5ce;">expat-devel x86_64 2.0.1-11.9.amzn1 amzn-main 144 k
</span><span style="color:#c0c5ce;">generic-logos noarch 17.0.0-2.5.amzn1 amzn-main 589 k
</span><span style="color:#c0c5ce;">openldap-devel x86_64 2.4.23-32.21.amzn1 amzn-main 1.4 M
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ sudo yum install php
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">Package アーキテクチャー
</span><span style="color:#c0c5ce;">バージョン リポジトリー 容量
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">インストール中:
</span><span style="color:#c0c5ce;">php x86_64 5.3.27-1.0.amzn1 amzn-main 2.7 M
</span><span style="color:#c0c5ce;">依存性関連でのインストールをします:
</span><span style="color:#c0c5ce;">php-cli x86_64 5.3.27-1.0.amzn1 amzn-main 2.6 M
</span><span style="color:#c0c5ce;">php-common x86_64 5.3.27-1.0.amzn1 amzn-main 1.0 M
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ sudo yum install php-mysql
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">Package アーキテクチャー
</span><span style="color:#c0c5ce;">バージョン リポジトリー 容量
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">インストール中:
</span><span style="color:#c0c5ce;">php-mysql x86_64 5.3.27-1.0.amzn1 amzn-main 179 k
</span><span style="color:#c0c5ce;">依存性関連でのインストールをします:
</span><span style="color:#c0c5ce;">mysql55-libs x86_64 5.5.34-1.40.amzn1 amzn-updates 802 k
</span><span style="color:#c0c5ce;">php-pdo x86_64 5.3.27-1.0.amzn1 amzn-main 161 k
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ sudo yum install mysql-server mysql-devel
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">Package アーキテクチャー
</span><span style="color:#c0c5ce;">バージョン リポジトリー 容量
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">インストール中:
</span><span style="color:#c0c5ce;">mysql-devel noarch 5.5-1.3.amzn1 amzn-main 2.5 k
</span><span style="color:#c0c5ce;">mysql-server noarch 5.5-1.3.amzn1 amzn-main 2.6 k
</span><span style="color:#c0c5ce;">依存性関連でのインストールをします:
</span><span style="color:#c0c5ce;">mysql55-devel x86_64 5.5.34-1.40.amzn1 amzn-updates 199 k
</span><span style="color:#c0c5ce;">mysql55-server x86_64 5.5.34-1.40.amzn1 amzn-updates 13 M
</span><span style="color:#c0c5ce;">perl-DBD-MySQL x86_64 4.020-2.8.amzn1 amzn-main 161 k
</span><span style="color:#c0c5ce;">perl-DBI x86_64 1.609-4.4.amzn1 amzn-main 745 k
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ sudo yum install php-devel php-gd php-mbstring php-pear php-xml php-imap
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">Package アーキテクチャー
</span><span style="color:#c0c5ce;">バージョン リポジトリー 容量
</span><span style="color:#c0c5ce;">================================================================================
</span><span style="color:#c0c5ce;">インストール中:
</span><span style="color:#c0c5ce;">php-devel x86_64 5.3.27-1.0.amzn1 amzn-main 2.6 M
</span><span style="color:#c0c5ce;">php-gd x86_64 5.3.27-1.0.amzn1 amzn-main 218 k
</span><span style="color:#c0c5ce;">php-imap x86_64 5.3.27-1.0.amzn1 amzn-main 93 k
</span><span style="color:#c0c5ce;">php-mbstring x86_64 5.3.27-1.0.amzn1 amzn-main 2.3 M
</span><span style="color:#c0c5ce;">php-pear noarch 1:1.9.4-20.15.amzn1 amzn-updates 430 k
</span><span style="color:#c0c5ce;">php-xml x86_64 5.3.27-1.0.amzn1 amzn-main 237 k
</span><span style="color:#c0c5ce;">依存性関連でのインストールをします:
</span><span style="color:#c0c5ce;">autoconf noarch 2.63-5.1.7.amzn1 amzn-main 932 k
</span><span style="color:#c0c5ce;">automake noarch 1.11.1-4.12.amzn1 amzn-main 579 k
</span><span style="color:#c0c5ce;">libXpm x86_64 3.5.10-2.9.amzn1 amzn-main 54 k
</span><span style="color:#c0c5ce;">libc-client x86_64 2007e-11.6.amzn1 amzn-main 632 k
</span><span style="color:#c0c5ce;">m4 x86_64 1.4.13-5.8.amzn1 amzn-main 286 k
</span><span style="color:#c0c5ce;">php-process x86_64 5.3.27-1.0.amzn1 amzn-main 65 k
</span><span style="color:#c0c5ce;">t1lib x86_64 5.1.2-6.5.amzn1 amzn-main 179 k
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">インストール系はこんなものか。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">設定ファイルの編集
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">mysqlちょーわかんね。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ sudo mysql -A -u root mysql
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">mysql&gt; update user set password=password (&#39;pw&#39;) where user=&#39;root&#39;;
</span><span style="color:#c0c5ce;">Query OK, 4 rows affected (0.00 sec)
</span><span style="color:#c0c5ce;">Rows matched: 4 Changed: 4 Warnings: 0
</span><span style="color:#c0c5ce;">mysql&gt; flush privileges;
</span><span style="color:#c0c5ce;">Query OK, 0 rows affected (0.00 sec)
</span><span style="color:#c0c5ce;">mysql&gt; create user ryo identified by &#39;pw&#39;;
</span><span style="color:#c0c5ce;">Query OK, 0 rows affected (0.00 sec)
</span><span style="color:#c0c5ce;">mysql&gt; grant select , insert, update , delete , drop , create on dbname.* to &#39;ryo&#39;@&#39;localhost&#39; identified by &#39;pw&#39;;
</span><span style="color:#c0c5ce;">Query OK, 0 rows affected (0.00 sec)
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">mysql&gt; create database ec2_wp character set utf8;
</span><span style="color:#c0c5ce;">Query OK, 1 row affected (0.00 sec)
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">mysql&gt; show databases;
</span><span style="color:#c0c5ce;">+--------------------+
</span><span style="color:#c0c5ce;">| Database |
</span><span style="color:#c0c5ce;">+--------------------+
</span><span style="color:#c0c5ce;">| information_schema |
</span><span style="color:#c0c5ce;">| ec2_wp |
</span><span style="color:#c0c5ce;">| mysql |
</span><span style="color:#c0c5ce;">| performance_schema |
</span><span style="color:#c0c5ce;">| test |
</span><span style="color:#c0c5ce;">+--------------------+
</span><span style="color:#c0c5ce;">5 rows in set (0.00 sec)
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">mysql&gt; use ec2_wp;
</span><span style="color:#c0c5ce;">Database changed
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">なんとなくリスタート
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">apache
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">Document root
</span><span style="color:#c0c5ce;">server name
</span><span style="color:#c0c5ce;">signature? off
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">wordpress setup
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">予め公式サイトからwgetしておいたやつを
</span><span style="color:#c0c5ce;">apacheで設定したDocument Root に移動。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">wp-configの設定
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">無事に起動したっぽいです。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">static press
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">wgetしてunzip展開です。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ cd wordpress/wp-content/plugin/
</span><span style="color:#c0c5ce;">$ wget[http://downloads.wordpress.org/plugin/staticpress.0.4.3.3.zip](http://downloads.wordpress.org/plugin/staticpress.0.4.3.3.zip)
</span><span style="color:#c0c5ce;">--2013-11-17 08:16:26--[http://downloads.wordpress.org/plugin/staticpress.0.4.3.3.zip](http://downloads.wordpress.org/plugin/staticpress.0.4.3.3.zip)
</span><span style="color:#c0c5ce;">downloads.wordpress.org (downloads.wordpress.org) をDNSに問いあわせています... 66.155.40.249, 66.155.40.250
</span><span style="color:#c0c5ce;">downloads.wordpress.org (downloads.wordpress.org)|66.155.40.249|:80 に接続しています... 接続しました。HTTP による接続要求を送信しました、応答を待っています... 200 OK
</span><span style="color:#c0c5ce;">長さ: 26452 (26K) [application/octet-stream]
</span><span style="color:#c0c5ce;">`staticpress.0.4.3.3.zip&#39; に保存中
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">100%[============================================================&gt;] 26,452 --.-K/s 時間 0.1s
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">2013-11-17 08:16:27 (231 KB/s) - `staticpress.0.4.3.3.zip&#39; へ保存完了 [26452/26452]
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">$ ls
</span><span style="color:#c0c5ce;">akismet hello.php index.php staticpress.0.4.3.3.zip wp-multibyte-patch
</span><span style="color:#c0c5ce;">$ unzip staticpress.0.4.3.3.zip
</span><span style="color:#c0c5ce;">Archive: staticpress.0.4.3.3.zip
</span><span style="color:#c0c5ce;">staticpress.0.4.3.3 packaged: Fri, 21 Jun 2013 07:14:37 +0000
</span><span style="color:#c0c5ce;">creating: staticpress/
</span><span style="color:#c0c5ce;">creating: staticpress/includes/
</span><span style="color:#c0c5ce;">inflating: staticpress/includes/class-InputValidator.php
</span><span style="color:#c0c5ce;">inflating: staticpress/includes/class-WP_Function_Wrapper.php
</span><span style="color:#c0c5ce;">inflating: staticpress/includes/class-static_press_admin.php
</span><span style="color:#c0c5ce;">inflating: staticpress/includes/class-static_press.php
</span><span style="color:#c0c5ce;">inflating: staticpress/plugin.php
</span><span style="color:#c0c5ce;">inflating: staticpress/readme.txt
</span><span style="color:#c0c5ce;">creating: staticpress/languages/
</span><span style="color:#c0c5ce;">inflating: staticpress/languages/static-press.pot
</span><span style="color:#c0c5ce;">inflating: staticpress/languages/static-press-ja.mo
</span><span style="color:#c0c5ce;">inflating: staticpress/languages/static-press-ja.po
</span><span style="color:#c0c5ce;">creating: staticpress/images/
</span><span style="color:#c0c5ce;">inflating: staticpress/images/ajax-loader.gif
</span><span style="color:#c0c5ce;">extracting: staticpress/images/menuicon-splite.png
</span><span style="color:#c0c5ce;">extracting: staticpress/images/options32.png
</span><span style="color:#c0c5ce;">extracting: staticpress/images/staticpress.png
</span><span style="color:#c0c5ce;">extracting: staticpress/images/rebuild32.png
</span><span style="color:#c0c5ce;">inflating: staticpress/uninstall.php
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">WORDPRESSの方で、もう認識しているっぽいので有効化
</span><span style="color:#c0c5ce;">するとプラグインの設定表示ができていて設定項目があります。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">これで、staticpressの処理事項画面にいくと「再構築」というボタンが出てきます。
</span><span style="color:#c0c5ce;">ぽっちと押すと実行。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">ひっかかった
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">私の上記の画像はデフォルトではなくて新しくwordpress以下にstaticというフォルダを作ったのですが、
</span><span style="color:#c0c5ce;">フォルダを作る前に実行するとフェッチでぐるぐる回り続けて永遠に終わりません。ご注意。
</span><span style="color:#c0c5ce;">
</span><span style="color:#c0c5ce;">あと一個動的な方も投稿をしておかないとだーっと全部吐出されるみたいで。
</span><span style="color:#c0c5ce;">これはこれは困ったちゃんでした。
</span></pre>
        </div>
        <div class="footer">
            <a href="/">TOP</a>
        </div>
    </body>
</html>
